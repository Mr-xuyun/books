{"remainingRequest":"D:\\myNote\\demo01\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myNote\\demo01\\src\\views\\Details.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myNote\\demo01\\src\\views\\Details.vue","mtime":1599621744677},{"path":"D:\\myNote\\demo01\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myNote\\demo01\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myNote\\demo01\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myNote\\demo01\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBUb2FzdCB9IGZyb20gJ3ZhbnQnOw0KaW1wb3J0IHsgbG9nIH0gZnJvbSAndXRpbCc7DQpleHBvcnQgZGVmYXVsdCB7DQogICAgIGRhdGEoKXsNCiAgICAgICAgIHJldHVybnsNCiAgICAgICAgICAgICBib29rczpbXSwNCiAgICAgICAgICAgICB1cmxJbWc6Imh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC9jb3ZlcmltYWdlLyIsDQogICAgICAgICAgICAgLy/kuablhpnor4TorrrnmoTlhoXlrrkNCiAgICAgICAgICAgICBtZXNzYWdlOiIiLA0KICAgICAgICAgICAgIC8v5q+P5pys5Lmm55So5oi36K+E6K6655qE5omA5pyJ5YaF5a65DQogICAgICAgICAgICAgcmV2aWV3OltdLA0KICAgICAgICAgfQ0KICAgICB9LA0KICAgICBtZXRob2RzOnsNCiAgICAgICAgIGdvQmFjaygpew0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKQ0KICAgICAgICAgfSwNCiAgICAgICAgIC8v5re75Yqg5pWw5o2uDQogICAgICAgICBhZGQoKXsNCiAgICAgICAgICAgICAgbGV0IGJvb2tzID0gdGhpcy5ib29rc1swXTsNCiAgICAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoYC9ib29rc3JhY2tgLGBiaWQ9JHtib29rcy5iaWR9JmJvb2tuYW1lPSR7IGJvb2tzLmJvb2tuYW1lfSZjb3ZlcmltYWdlPSR7Ym9va3MuY292ZXJpbWFnZX1gKS50aGVuKHJlcz0+ew0KICAgICAgICAgICAgICAgICAgICBpZihyZXMuZGF0YT09MCl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICBUb2FzdCgi5q2k5Lmm57GN5bey5a2Y5ZyoIikgICANCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgIFRvYXN0KCLmiJDlip/mt7vliqDkuabmnrYiKSAgIA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgfSkNCiAgICAgfSwNCiAgICAgLy/lj5HpgIHnlKjmiLfnmoTor4TorroNCiAgICAgc2VuZCgpew0KICAgICAgICAgbGV0IHVpZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVuYW1lIik7DQogICAgICAgICBsZXQgYmlkID0gdGhpcy4kcm91dGUucXVlcnkuYmlkIA0KICAgICAgICAgbGV0IHJldmlldyA9dGhpcy5tZXNzYWdlOw0KICAgICAgICAgICBpZih0aGlzLm1lc3NhZ2UudHJpbSgpPT0iIil7DQogICAgICAgICAgICAgIFRvYXN0KCLlhoXlrrnkuI3og73kuLrnqboiKQ0KICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICBpZih1aWQ9PW51bGwgKXsNCiAgICAgICAgICAgICAgVG9hc3QoIuivt+WFiOeZu+W9lSDmiY3og73or4TorroiKQ0KICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgdGhpcy5heGlvcy5nZXQoYC9ib29rcmV2aWV3P2JpZD0ke2JpZH0mdWlkPSR7dWlkfSZyZXZpZXc9JHtyZXZpZXd9YCApLnRoZW4ocmVzPT57DQogICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgICAgICAgICAgICBpZihyZXMuZGF0YS5jb2RlPT0yMDApew0KICAgICAgICAgICAgICAgICAgICAgICAgIFRvYXN0KCLor4TorrrmiJDlip8iKQ0KICAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgIFRvYXN0KCLor4TorrrlpLHotKUiKQ0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgIH0pDQogICAgICAgIA0KICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgDQogICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpew0KICAgICAgICAvLyDojrflj5bmr4/mnKznmoTor6bmg4XlhoXlrrkNCiAgICAgICAgIGxldCBiaWQgPXRoaXMuJHJvdXRlLnF1ZXJ5LmJpZDsNCiAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvZGV0YWlsP2JpZD0iK2JpZCkudGhlbihyZXM9PnsNCiAgICAgICAgICAgICBmb3IoIGxldCBpdGVtIG9mIHJlcy5kYXRhKXsNCiAgICAgICAgICAgICAgICAgaXRlbS5jb3ZlcmltYWdlID0gdGhpcy51cmxJbWcrICBpdGVtLmNvdmVyaW1hZ2U7DQogICAgICAgICAgICAgICAgIHRoaXMuYm9va3MucHVzaChpdGVtKQ0KICAgICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgIH0pDQogICAgICAgIC8v5Lmm57GN6K+E6K6655qE5YaF5a65DQogICAgICAgICAgICAgdGhpcy5heGlvcy5nZXQoIi9jb21tZW50P2JpZD0iK2JpZCkudGhlbihyZXM9PnsNCiAgICAgICAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiByZXMuZGF0YSl7DQogICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmV2aWV3LnB1c2goaXRlbSkNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgDQogICAgICAgICANCiAgICAgICANCiAgfQ0KICANCg0KfQ0K"},{"version":3,"sources":["Details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;;AAGA","file":"Details.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n     <div class=\"details\">\r\n       <van-nav-bar\r\n        title=\"书城\" \r\n        left-text=\"首页\" left-arrow    @click-left=\"goBack\"   \r\n        >\r\n        <template #right>\r\n            <van-icon name=\"search\" size=\"18\" color=\"green\"></van-icon>\r\n        </template>\r\n      </van-nav-bar>\r\n          <div v-for=\"(item,index) of books\" :key=\"index\">\r\n           <div   class=\"content\">\r\n              <div >\r\n                  <img :src=\"item.coverimage\" alt=\"\" class=\"detailImg\">\r\n              </div>\r\n              <div class=\"books\"  >\r\n                 <h2 class=\"title\">{{item.bookname}}</h2> \r\n                 <p class=\"author\"> 作者:{{item.author}}</p>\r\n               </div>\r\n            </div>\r\n             <p class=\"subject\">{{item.intro}}</p>\r\n          </div>\r\n           <!-- 用户的评论的内容 -->\r\n            <div v-for=\"(item ,index) of review\" :key=\"index+200\">{{item.review}}</div>\r\n\r\n\r\n            <!-- 用户评论的输入框 -->\r\n            <van-field\r\n                v-model=\"message\"\r\n                rows=\"2\"\r\n                autosize\r\n                label=\"评论\"\r\n                type=\"textarea\"\r\n                maxlength=\"50\"\r\n                placeholder=\"请输入留言\"\r\n                show-word-limit\r\n            />\r\n             <van-button style=\"margin-left:300px\" @click=\"send\">发送</van-button>\r\n          \r\n          <!-- 底部 -->\r\n          <van-tabbar class=\"tabbar\" >\r\n            <van-tabbar-item @click=\"add\">\r\n            <div ><img src=\"../assets/jiarushujia_01.svg\" ></div>\r\n                加入书架\r\n            </van-tabbar-item>\r\n            <van-tabbar-item >\r\n                 <div ><img src=\"../assets/yuedu.svg\"></div>\r\n                开始阅读\r\n            </van-tabbar-item>\r\n           </van-tabbar>\r\n     </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from 'vant';\r\nimport { log } from 'util';\r\nexport default {\r\n     data(){\r\n         return{\r\n             books:[],\r\n             urlImg:\"http://localhost:9090/coverimage/\",\r\n             //书写评论的内容\r\n             message:\"\",\r\n             //每本书用户评论的所有内容\r\n             review:[],\r\n         }\r\n     },\r\n     methods:{\r\n         goBack(){\r\n            this.$router.push(\"/\")\r\n         },\r\n         //添加数据\r\n         add(){\r\n              let books = this.books[0];\r\n             this.axios.post(`/booksrack`,`bid=${books.bid}&bookname=${ books.bookname}&coverimage=${books.coverimage}`).then(res=>{\r\n                    if(res.data==0){\r\n                           Toast(\"此书籍已存在\")   \r\n                    }else{\r\n                          Toast(\"成功添加书架\")   \r\n                    }\r\n             })\r\n     },\r\n     //发送用户的评论\r\n     send(){\r\n         let uid = sessionStorage.getItem(\"uname\");\r\n         let bid = this.$route.query.bid \r\n         let review =this.message;\r\n           if(this.message.trim()==\"\"){\r\n              Toast(\"内容不能为空\")\r\n              return\r\n         }\r\n        \r\n         if(uid==null ){\r\n              Toast(\"请先登录 才能评论\")\r\n         }else{\r\n             this.axios.get(`/bookreview?bid=${bid}&uid=${uid}&review=${review}` ).then(res=>{\r\n                 console.log(res);\r\n                     if(res.data.code==200){\r\n                         Toast(\"评论成功\")\r\n                     }else{\r\n                          Toast(\"评论失败\")\r\n                     }\r\n             })\r\n        \r\n         }\r\n        \r\n        \r\n     }\r\n  },\r\n  mounted(){\r\n        // 获取每本的详情内容\r\n         let bid =this.$route.query.bid;\r\n         this.axios.get(\"/detail?bid=\"+bid).then(res=>{\r\n             for( let item of res.data){\r\n                 item.coverimage = this.urlImg+  item.coverimage;\r\n                 this.books.push(item)\r\n             }\r\n          \r\n         })\r\n        //书籍评论的内容\r\n             this.axios.get(\"/comment?bid=\"+bid).then(res=>{\r\n                  for(let item of res.data){\r\n                       this.review.push(item)\r\n                  }\r\n                 \r\n            })\r\n            \r\n         \r\n       \r\n  }\r\n  \r\n\r\n}\r\n</script>\r\n<style scoped>\r\n .content{\r\n     display: flex;\r\n }\r\n .detailImg{\r\n    width: 80px;\r\n  height: 107px;\r\n }\r\n  .subject{\r\n   color: #999;\r\n   margin: 10px 0px;\r\n }\r\n .content .author{\r\n     color: green;\r\n     margin-top:50px; \r\n }\r\n .content .title{\r\n     margin: 10px 2px;\r\n\r\n     color: #666;\r\n }\r\n .details .tabbar{\r\n     display: flex;\r\n     flex-direction: row;\r\n }\r\n .van-tabbar-item--active{\r\n     color: green;\r\n     background-color:lightgreen; \r\n     border-radius: 5px;\r\n     text-align: center;\r\n }\r\n .van-tabbar-item{\r\n\r\n     text-align: center;\r\n     color: green;\r\n }\r\n .van-cell{\r\n     margin-top: 50px;\r\n   \r\n\r\n }\r\n .van-cell::after{\r\n       border: 1px solid #323233;  \r\n }\r\n</style>\r\n\r\n\r\n"]}]}