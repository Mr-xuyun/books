{"remainingRequest":"D:\\myNote\\demo01\\node_modules\\babel-loader\\lib\\index.js!D:\\myNote\\demo01\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\myNote\\demo01\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myNote\\demo01\\src\\views\\Details.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myNote\\demo01\\src\\views\\Details.vue","mtime":1599619681855},{"path":"D:\\myNote\\demo01\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myNote\\demo01\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myNote\\demo01\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myNote\\demo01\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiRDovbXlOb3RlL2RlbW8wMS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IFRvYXN0IH0gZnJvbSAndmFudCc7CmltcG9ydCB7IGxvZyB9IGZyb20gJ3V0aWwnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJvb2tzOiBbXSwKICAgICAgdXJsSW1nOiAiaHR0cDovL2xvY2FsaG9zdDo5MDkwL2NvdmVyaW1hZ2UvIiwKICAgICAgLy/kuablhpnor4TorrrnmoTlhoXlrrkKICAgICAgbWVzc2FnZTogIiIsCiAgICAgIC8v5q+P5pys5Lmm55So5oi36K+E6K6655qE5omA5pyJ5YaF5a65CiAgICAgIHJldmlldzogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb0JhY2s6IGZ1bmN0aW9uIGdvQmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgIH0sCiAgICAvL+a3u+WKoOaVsOaNrgogICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgIHZhciBib29rcyA9IHRoaXMuYm9va3NbMF07CiAgICAgIHRoaXMuYXhpb3MucG9zdCgiL2Jvb2tzcmFjayIsICJiaWQ9Ii5jb25jYXQoYm9va3MuYmlkLCAiJmJvb2tuYW1lPSIpLmNvbmNhdChib29rcy5ib29rbmFtZSwgIiZjb3ZlcmltYWdlPSIpLmNvbmNhdChib29rcy5jb3ZlcmltYWdlKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhID09IDApIHsKICAgICAgICAgIFRvYXN0KCLmraTkuabnsY3lt7LlrZjlnKgiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgVG9hc3QoIuaIkOWKn+a3u+WKoOS5puaetiIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/lj5HpgIHnlKjmiLfnmoTor4TorroKICAgIHNlbmQ6IGZ1bmN0aW9uIHNlbmQoKSB7CiAgICAgIHZhciB1aWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1bmFtZSIpOwogICAgICB2YXIgYmlkID0gdGhpcy4kcm91dGUucXVlcnkuYmlkOwogICAgICB2YXIgcmV2aWV3ID0gdGhpcy5tZXNzYWdlOwoKICAgICAgaWYgKHRoaXMubWVzc2FnZS50cmltKCkgPT0gIiIpIHsKICAgICAgICBUb2FzdCgi5YaF5a655LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodWlkID09IG51bGwpIHsKICAgICAgICBUb2FzdCgi6K+35YWI55m75b2VIOaJjeiDveivhOiuuiIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvYm9va3Jldmlldz9iaWQ9Ii5jb25jYXQoYmlkLCAiJnVpZD0iKS5jb25jYXQodWlkLCAiJnJldmlldz0iKS5jb25jYXQocmV2aWV3KSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgICAgICBUb2FzdCgi6K+E6K665oiQ5YqfIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBUb2FzdCgi6K+E6K665aSx6LSlIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIC8vIOiOt+WPluavj+acrOeahOivpuaDheWGheWuuQogICAgdmFyIGJpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmJpZDsKICAgIHRoaXMuYXhpb3MuZ2V0KCIvZGV0YWlsP2JpZD0iICsgYmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlcy5kYXRhKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIGl0ZW0uY292ZXJpbWFnZSA9IF90aGlzLnVybEltZyArIGl0ZW0uY292ZXJpbWFnZTsKCiAgICAgICAgICBfdGhpcy5ib29rcy5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CiAgICB9KTsgLy/kuabnsY3or4TorrrnmoTlhoXlrrkKCiAgICB0aGlzLmF4aW9zLmdldCgiL2NvbW1lbnQ/YmlkPSIgKyBiaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlcy5kYXRhKSwKICAgICAgICAgIF9zdGVwMjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgIF90aGlzLnJldmlldy5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["Details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA,SAAA,KAAA,QAAA,MAAA;AACA,SAAA,GAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,MAAA,EAAA,mCAFA;AAGA;AACA,MAAA,OAAA,EAAA,EAJA;AAKA;AACA,MAAA,MAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA,KAHA;AAIA;AACA,IAAA,GALA,iBAKA;AACA,UAAA,KAAA,GAAA,KAAA,KAAA,CAAA,CAAA,CAAA;AACA,WAAA,KAAA,CAAA,IAAA,6BAAA,KAAA,CAAA,GAAA,uBAAA,KAAA,CAAA,QAAA,yBAAA,KAAA,CAAA,UAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA;AACA;AACA,OANA;AAOA,KAdA;AAeA;AACA,IAAA,IAhBA,kBAgBA;AACA,UAAA,GAAA,GAAA,cAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,UAAA,GAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA;AACA,UAAA,MAAA,GAAA,KAAA,OAAA;;AACA,UAAA,KAAA,OAAA,CAAA,IAAA,MAAA,EAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA;AACA;AACA;;AACA,UAAA,GAAA,IAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,WAAA,CAAA;AACA,OAFA,MAEA;AACA,aAAA,KAAA,CAAA,GAAA,2BAAA,GAAA,kBAAA,GAAA,qBAAA,MAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,YAAA,KAAA,CAAA,MAAA,CAAA;AACA,WAFA,MAEA;AACA,YAAA,KAAA,CAAA,MAAA,CAAA;AACA;AACA,SAPA;AASA;AAEA;AAtCA,GAXA;AAmDA,EAAA,OAnDA,qBAmDA;AAAA;;AACA;AACA,QAAA,GAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,iBAAA,GAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AAAA,iDACA,GAAA,CAAA,IADA;AAAA;;AAAA;AACA,4DAAA;AAAA,cAAA,IAAA;AACA,UAAA,IAAA,CAAA,UAAA,GAAA,KAAA,CAAA,MAAA,GAAA,IAAA,CAAA,UAAA;;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAMA,KANA,EAHA,CAUA;;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,kBAAA,GAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AAAA,kDACA,GAAA,CAAA,IADA;AAAA;;AAAA;AACA,+DAAA;AAAA,cAAA,IAAA;;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,IAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAIA,KAJA;AAQA;AAtEA,CAAA","sourcesContent":["<template>\r\n     <div class=\"details\">\r\n       <van-nav-bar\r\n        title=\"书城\" \r\n        left-text=\"首页\" left-arrow    @click-left=\"goBack\"   \r\n        >\r\n        <template #right>\r\n            <van-icon name=\"search\" size=\"18\" color=\"green\"></van-icon>\r\n        </template>\r\n      </van-nav-bar>\r\n          <div v-for=\"(item,index) of books\" :key=\"index\">\r\n           <div   class=\"content\">\r\n              <div >\r\n                  <img :src=\"item.coverimage\" alt=\"\" class=\"detailImg\">\r\n              </div>\r\n              <div class=\"books\"  >\r\n                 <h2 class=\"title\">{{item.bookname}}</h2> \r\n                 <p class=\"author\"> 作者:{{item.author}}</p>\r\n               </div>\r\n            </div>\r\n             <p class=\"subject\">{{item.intro}}</p>\r\n          </div>\r\n           <!-- 用户的评论的内容 -->\r\n            <div v-for=\"(item ,index) of review\" :key=\"index+200\">{{item.review}}</div>\r\n\r\n\r\n            <!-- 用户评论的输入框 -->\r\n            <van-field\r\n                v-model=\"message\"\r\n                rows=\"2\"\r\n                autosize\r\n                label=\"评论\"\r\n                type=\"textarea\"\r\n                maxlength=\"50\"\r\n                placeholder=\"请输入留言\"\r\n                show-word-limit\r\n            />\r\n             <van-button style=\"margin-left:300px\" @click=\"send\">发送</van-button>\r\n          \r\n          <!-- 底部 -->\r\n          <van-tabbar class=\"tabbar\" >\r\n            <van-tabbar-item @click=\"add\">\r\n            <div ><img src=\"../assets/jiarushujia_01.svg\" ></div>\r\n                加入书架\r\n            </van-tabbar-item>\r\n            <van-tabbar-item >\r\n                 <div ><img src=\"../assets/yuedu.svg\"></div>\r\n                开始阅读\r\n            </van-tabbar-item>\r\n           </van-tabbar>\r\n     </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from 'vant';\r\nimport { log } from 'util';\r\nexport default {\r\n     data(){\r\n         return{\r\n             books:[],\r\n             urlImg:\"http://localhost:9090/coverimage/\",\r\n             //书写评论的内容\r\n             message:\"\",\r\n             //每本书用户评论的所有内容\r\n             review:[],\r\n         }\r\n     },\r\n     methods:{\r\n         goBack(){\r\n            this.$router.push(\"/\")\r\n         },\r\n         //添加数据\r\n         add(){\r\n              let books = this.books[0];\r\n             this.axios.post(`/booksrack`,`bid=${books.bid}&bookname=${ books.bookname}&coverimage=${books.coverimage}`).then(res=>{\r\n                    if(res.data==0){\r\n                           Toast(\"此书籍已存在\")   \r\n                    }else{\r\n                          Toast(\"成功添加书架\")   \r\n                    }\r\n             })\r\n     },\r\n     //发送用户的评论\r\n     send(){\r\n         let uid = sessionStorage.getItem(\"uname\");\r\n         let bid = this.$route.query.bid \r\n         let review =this.message;\r\n         if(this.message.trim()==\"\"){\r\n              Toast(\"内容不能为空\")\r\n              return\r\n         }\r\n         if(uid==null ){\r\n              Toast(\"请先登录 才能评论\")\r\n         }else{\r\n             this.axios.get(`/bookreview?bid=${bid}&uid=${uid}&review=${review}` ).then(res=>{\r\n                 console.log(res);\r\n                     if(res.data.code==200){\r\n                         Toast(\"评论成功\")\r\n                     }else{\r\n                          Toast(\"评论失败\")\r\n                     }\r\n             })\r\n        \r\n         }\r\n        \r\n     }\r\n  },\r\n  mounted(){\r\n        // 获取每本的详情内容\r\n         let bid =this.$route.query.bid;\r\n         this.axios.get(\"/detail?bid=\"+bid).then(res=>{\r\n             for( let item of res.data){\r\n                 item.coverimage = this.urlImg+  item.coverimage;\r\n                 this.books.push(item)\r\n             }\r\n          \r\n         })\r\n        //书籍评论的内容\r\n             this.axios.get(\"/comment?bid=\"+bid).then(res=>{\r\n                  for(let item of res.data){\r\n                       this.review.push(item)\r\n                  }\r\n            })\r\n            \r\n         \r\n       \r\n  }\r\n  \r\n\r\n}\r\n</script>\r\n<style scoped>\r\n .content{\r\n     display: flex;\r\n }\r\n .detailImg{\r\n    width: 80px;\r\n  height: 107px;\r\n }\r\n  .subject{\r\n   color: #999;\r\n   margin: 10px 0px;\r\n }\r\n .content .author{\r\n     color: green;\r\n     margin-top:50px; \r\n }\r\n .content .title{\r\n     margin: 10px 2px;\r\n\r\n     color: #666;\r\n }\r\n .details .tabbar{\r\n     display: flex;\r\n     flex-direction: row;\r\n }\r\n .van-tabbar-item--active{\r\n     color: green;\r\n     background-color:lightgreen; \r\n     border-radius: 5px;\r\n     text-align: center;\r\n }\r\n .van-tabbar-item{\r\n\r\n     text-align: center;\r\n     color: green;\r\n }\r\n .van-cell{\r\n     margin-top: 50px;\r\n   \r\n\r\n }\r\n .van-cell::after{\r\n       border: 1px solid #323233;  \r\n }\r\n</style>\r\n\r\n\r\n"],"sourceRoot":"src/views"}]}